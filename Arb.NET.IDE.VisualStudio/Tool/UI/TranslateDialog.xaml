<pUi:DialogWindow x:Class="Arb.NET.IDE.VisualStudio.Tool.UI.TranslateDialog"
                  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                  xmlns:pUi="clr-namespace:Microsoft.VisualStudio.PlatformUI;assembly=Microsoft.VisualStudio.Shell.15.0"
                  xmlns:vsui="clr-namespace:Microsoft.VisualStudio.PlatformUI;assembly=Microsoft.VisualStudio.Shell.15.0"
                  xmlns:ui="clr-namespace:Arb.NET.IDE.VisualStudio.Tool.UI"
                  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                  mc:Ignorable="d"
                  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                  d:DesignHeight="600"
                  d:DesignWidth="800"
                  Background="{DynamicResource {x:Static vsui:EnvironmentColors.ToolWindowBackgroundBrushKey}}">
    <pUi:DialogWindow.Resources>
        <Style x:Key="HeaderStyle" TargetType="DataGridColumnHeader">
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Padding" Value="4,2" />
            <Setter Property="Background" Value="{DynamicResource {x:Static vsui:EnvironmentColors.ToolWindowBackgroundBrushKey}}" />
            <Setter Property="Foreground" Value="{DynamicResource {x:Static vsui:EnvironmentColors.ToolWindowTextBrushKey}}" />
        </Style>
    </pUi:DialogWindow.Resources>
    <Grid Margin="12"
          Background="{DynamicResource {x:Static vsui:EnvironmentColors.ToolWindowBackgroundBrushKey}}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Source locale -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,6">
            <TextBlock Text="Source locale:"
                       VerticalAlignment="Center"
                       Foreground="{DynamicResource {x:Static vsui:EnvironmentColors.ToolWindowTextBrushKey}}"
                       Margin="0,0,8,0" />
            <ComboBox x:Name="SourceLocaleCombo" MinWidth="100" />
        </StackPanel>

        <!-- Target locales -->
        <StackPanel Grid.Row="1" Margin="0,0,0,6">
            <TextBlock Text="Target locales:"
                       Foreground="{DynamicResource {x:Static vsui:EnvironmentColors.ToolWindowTextBrushKey}}"
                       Margin="0,0,0,4" />
            <ItemsControl x:Name="TargetLocalesPanel">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <CheckBox d:DataContext="{d:DesignInstance Type=ui:LocaleSelection}"
                                  Content="{Binding Locale}"
                                  IsChecked="{Binding IsSelected}"
                                  Margin="0,0,12,2"
                                  Foreground="{DynamicResource {x:Static vsui:EnvironmentColors.ToolWindowTextBrushKey}}" />
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </StackPanel>

        <!-- Mode -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,0,0,6">
            <RadioButton x:Name="EmptyOnlyRadio" Content="Empty cells only" IsChecked="True" Margin="0,0,16,0"
                         Checked="ModeRadio_Changed"
                         Foreground="{DynamicResource {x:Static vsui:EnvironmentColors.ToolWindowTextBrushKey}}" />
            <RadioButton x:Name="AllCellsRadio" Content="All cells"
                         Checked="ModeRadio_Changed"
                         Foreground="{DynamicResource {x:Static vsui:EnvironmentColors.ToolWindowTextBrushKey}}" />
        </StackPanel>

        <!-- Custom prompt -->
        <StackPanel Grid.Row="3" Margin="0,0,0,6">
            <TextBlock Text="Custom prompt (optional, added to every request):"
                       Foreground="{DynamicResource {x:Static vsui:EnvironmentColors.ToolWindowTextBrushKey}}"
                       Margin="0,0,0,2" />
            <TextBox x:Name="CustomPromptBox" AcceptsReturn="True" MinLines="2" MaxLines="4"
                     TextWrapping="Wrap" VerticalScrollBarVisibility="Auto" />
        </StackPanel>

        <!-- Translate button -->
        <StackPanel Grid.Row="4" Orientation="Horizontal" Margin="0,0,0,8">
            <Button x:Name="TranslateButton" Content="Translate" Padding="12,4" Click="TranslateButton_OnClick" />
            <Button x:Name="CancelTranslationButton" Content="Stop" Padding="12,4" Margin="8,0,0,0"
                    Visibility="Collapsed" Click="CancelTranslationButton_OnClick" />
        </StackPanel>

        <!-- Results grid -->
        <DataGrid x:Name="ResultsGrid"
                  Grid.Row="5"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  CanUserDeleteRows="False"
                  HeadersVisibility="Column"
                  GridLinesVisibility="All"
                  SelectionUnit="FullRow"
                  MinHeight="120"
                  SelectionMode="Extended"
                  ColumnHeaderStyle="{StaticResource HeaderStyle}"
                  Background="{DynamicResource {x:Static vsui:EnvironmentColors.ToolWindowBackgroundBrushKey}}"
                  Foreground="{DynamicResource {x:Static vsui:EnvironmentColors.ToolWindowTextBrushKey}}"
                  RowBackground="{DynamicResource {x:Static vsui:EnvironmentColors.ToolWindowBackgroundBrushKey}}"
                  AlternatingRowBackground="{DynamicResource {x:Static vsui:EnvironmentColors.ToolWindowBackgroundBrushKey}}"
                  HorizontalGridLinesBrush="{DynamicResource {x:Static vsui:EnvironmentColors.ToolWindowBorderBrushKey}}"
                  VerticalGridLinesBrush="{DynamicResource {x:Static vsui:EnvironmentColors.ToolWindowBorderBrushKey}}">
            <DataGrid.Columns>
                <DataGridCheckBoxColumn Header="" Binding="{Binding Accepted, UpdateSourceTrigger=PropertyChanged}" Width="30" />
                <DataGridTextColumn Header="Key" Binding="{Binding Key}" IsReadOnly="True" Width="140" />
                <DataGridTextColumn Header="Target" Binding="{Binding TargetLocale}" IsReadOnly="True" Width="50" />
                <DataGridTextColumn Header="Source" Binding="{Binding SourceText}" IsReadOnly="True" Width="180" />
                <DataGridTextColumn Header="Existing" Binding="{Binding ExistingTranslation}" IsReadOnly="True" Width="130" />
                <DataGridTextColumn Header="Translation" Binding="{Binding ProposedTranslation, UpdateSourceTrigger=PropertyChanged}" Width="*" />
            </DataGrid.Columns>
        </DataGrid>

        <!-- Progress -->
        <StackPanel Grid.Row="6" Margin="0,6,0,6">
            <TextBlock x:Name="StatusText" Text=""
                       Foreground="{DynamicResource {x:Static vsui:EnvironmentColors.ToolWindowTextBrushKey}}"
                       Margin="0,0,0,4" />
            <ProgressBar x:Name="ProgressBar" Height="16" Minimum="0" Maximum="100" Value="0"
                         Visibility="Collapsed" />
        </StackPanel>

        <!-- Action buttons -->
        <StackPanel Grid.Row="7" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button x:Name="ApplyButton" Content="Apply Selected" Padding="12,4" Margin="0,0,8,0"
                    IsEnabled="False" Click="ApplyButton_OnClick" />
            <Button Content="Close" Padding="12,4" IsCancel="True" />
        </StackPanel>
    </Grid>
</pUi:DialogWindow>